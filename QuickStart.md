# å°ˆæ¡ˆå¿«é€Ÿä¸Šæ‰‹æŒ‡å— (Quick Start)

æœ¬æŒ‡å—å°‡å¼•å°æ‚¨å¦‚ä½•åœ¨æœ¬æ©Ÿç’°å¢ƒä¸­è¨­å®šã€å•Ÿå‹•ä¸¦ä½¿ç”¨é€™å€‹å°ˆæ¡ˆã€‚

## æ‡¶äººåŒ… (TL;DR - The Easy Way)

æˆ‘å€‘æä¾›äº†å¤šå€‹æ‰¹æ¬¡æª” (`.bat`)ï¼Œå¯ä»¥ä¸€éµå•Ÿå‹•é–‹ç™¼ç’°å¢ƒã€‚

### ğŸš€ å®Œæ•´é–‹ç™¼ç’°å¢ƒå•Ÿå‹•
1.  ç¢ºä¿æ‚¨çš„é›»è…¦ä¸Šå·²å®‰è£ **.NET 8 SDK**ã€**Docker Desktop** å’Œ **SQL Server Command Line Tools**ã€‚
2.  åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹ï¼Œç›´æ¥**é›™æ“ŠåŸ·è¡Œ `start-dev.bat`**ã€‚
3.  è…³æœ¬æœƒè‡ªå‹•å®Œæˆä»¥ä¸‹æ‰€æœ‰äº‹æƒ…ï¼š
    -   åœæ­¢æ—¢æœ‰çš„ Docker å®¹å™¨
    -   å•Ÿå‹• Docker SQL Server å’Œ Redis å®¹å™¨
    -   ç­‰å¾… 30 ç§’ï¼Œç¢ºä¿è³‡æ–™åº«å®Œå…¨å•Ÿå‹•
    -   åŸ·è¡Œ `init.sql` è…³æœ¬åˆå§‹åŒ–è³‡æ–™åº«
    -   å•Ÿå‹• .NET Web API
4.  çœ‹åˆ° `https://localhost:7194/swagger` çš„ç¶²å€å‡ºç¾å¾Œï¼Œå³å¯é–‹å§‹ä½¿ç”¨ã€‚

### ğŸ”§ åƒ…å•Ÿå‹•æœå‹™ï¼ˆä¸å« Web APIï¼‰
å¦‚æœæ‚¨åªæƒ³å•Ÿå‹•è³‡æ–™åº«å’Œ Redisï¼Œè«‹åŸ·è¡Œ `start-services-only.bat`ï¼š
- å•Ÿå‹• SQL Server å’Œ Redis å®¹å™¨
- åˆå§‹åŒ–è³‡æ–™åº«
- æä¾›æ‰‹å‹•å•Ÿå‹• Web API çš„æŒ‡ä»¤ï¼ˆä½¿ç”¨ HTTPS é…ç½®ï¼‰
- **ä¸æœƒè‡ªå‹•å•Ÿå‹• Web API**

### ğŸ›‘ åœæ­¢æœå‹™
åŸ·è¡Œ `stop-services.bat` ä¾†åœæ­¢æ‰€æœ‰ Docker å®¹å™¨ã€‚

**æ³¨æ„**: å¦‚æœè‡ªå‹•åˆå§‹åŒ–å¤±æ•—ï¼Œè«‹åƒè€ƒã€Œæ‰‹å‹•å•Ÿå‹•ã€ç« ç¯€ä¸­çš„ã€Œæ­¥é©Ÿä¸‰ï¼šåˆå§‹åŒ–è³‡æ–™åº«ã€ã€‚

---

## æ‰‹å‹•å•Ÿå‹• (The Manual Way)

å¦‚æœæ‚¨æƒ³äº†è§£æ¯å€‹æ­¥é©Ÿçš„ç´°ç¯€ï¼Œæˆ–æ˜¯æ‡¶äººåŒ…åŸ·è¡Œå¤±æ•—ï¼Œå¯ä»¥ä¾ç…§ä»¥ä¸‹æ‰‹å‹•æ­¥é©ŸåŸ·è¡Œã€‚

### 1. ç’°å¢ƒéœ€æ±‚ (Prerequisites)

åœ¨é–‹å§‹ä¹‹å‰ï¼Œè«‹ç¢ºä¿æ‚¨çš„é›»è…¦ä¸Šå·²å®‰è£ä»¥ä¸‹è»Ÿé«”ï¼š

- **[.NET 8 SDK](https://dotnet.microsoft.com/download/dotnet/8.0)**: æœ¬å°ˆæ¡ˆçš„å¾Œç«¯ API ä½¿ç”¨ .NET 8 æ¡†æ¶ã€‚
- **[Docker Desktop](https://www.docker.com/products/docker-desktop/)**: æˆ‘å€‘ä½¿ç”¨ Docker ä¾†å®¹å™¨åŒ–ä¸¦åŸ·è¡Œ SQL Server è³‡æ–™åº«ï¼Œä»¥ç¢ºä¿é–‹ç™¼ç’°å¢ƒçš„ä¸€è‡´æ€§ã€‚
- **[SQL Server Command Line Tools](https://docs.microsoft.com/en-us/sql/tools/sqlcmd-utility)**: ç”¨æ–¼åŸ·è¡Œ SQL è…³æœ¬ä¾†åˆå§‹åŒ–è³‡æ–™åº«ã€‚

## 2. å°ˆæ¡ˆè¨­å®š (Configuration)

æœ¬å°ˆæ¡ˆçš„è¨­å®šå·²ç›¡å¯èƒ½ç°¡åŒ–ï¼Œæ‚¨å¹¾ä¹ä¸éœ€è¦æ‰‹å‹•ä¿®æ”¹ä»»ä½•è¨­å®šæª”ã€‚

- **è³‡æ–™åº«**: å°ˆæ¡ˆæœƒè‡ªå‹•é€£æ¥åˆ°ç”± Docker å•Ÿå‹•çš„ SQL Server å®¹å™¨ã€‚é€£ç·šå­—ä¸²å·²è¨­å®šåœ¨ `WebApplication1/WebApplication1/appsettings.json` ä¸­ã€‚
- **è³‡æ–™åº«çµæ§‹**: è³‡æ–™åº«çš„çµæ§‹ (Schema) æ˜¯é€é `db-scripts/init.sql` æª”æ¡ˆä¾†å®šç¾©çš„ã€‚æ‚¨éœ€è¦æ‰‹å‹•åŸ·è¡Œé€™å€‹è…³æœ¬ä¾†å»ºç«‹æ‰€éœ€çš„è³‡æ–™åº«å’Œè³‡æ–™è¡¨ã€‚
- **å¿«å–æœå‹™**: å°ˆæ¡ˆæ”¯æ´å…©ç¨®å¿«å–æ–¹å¼ï¼š
  - **Memory Cache**: é è¨­ä½¿ç”¨è¨˜æ†¶é«”å¿«å–ï¼Œé©ç”¨æ–¼å–®ä¸€æ‡‰ç”¨ç¨‹å¼å¯¦ä¾‹
  - **Redis Cache**: æ”¯æ´åˆ†æ•£å¼å¿«å–ï¼Œé©ç”¨æ–¼å¤šæ‡‰ç”¨ç¨‹å¼å¯¦ä¾‹
  - å¯åœ¨ `appsettings.json` ä¸­ä¿®æ”¹ `CacheSettings.ProviderType` ä¾†åˆ‡æ›å¿«å–æ–¹å¼

### 3. å¦‚ä½•å•Ÿå‹•å°ˆæ¡ˆ (Running the Project)

è«‹ä¾ç…§ä»¥ä¸‹ä¸‰å€‹æ­¥é©Ÿä¾†å•Ÿå‹•å®Œæ•´çš„æ‡‰ç”¨ç¨‹å¼ï¼š

### æ­¥é©Ÿä¸€ï¼šåœæ­¢æ—¢æœ‰å®¹å™¨ä¸¦å•Ÿå‹•æœå‹™

é¦–å…ˆï¼Œæˆ‘å€‘éœ€è¦åœæ­¢æ—¢æœ‰çš„ Docker å®¹å™¨ï¼Œç„¶å¾Œå•Ÿå‹• SQL Server è³‡æ–™åº«å®¹å™¨å’Œ Redis å¿«å–æœå‹™ã€‚

æ‰“é–‹æ‚¨çš„çµ‚ç«¯æ©Ÿ (Terminal)ï¼Œåˆ‡æ›åˆ°æœ¬å°ˆæ¡ˆçš„**æ ¹ç›®éŒ„** (ä¹Ÿå°±æ˜¯ `docker-compose.yml` æ‰€åœ¨çš„ç›®éŒ„)ï¼Œç„¶å¾ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
# åœæ­¢æ—¢æœ‰çš„å®¹å™¨
docker-compose down

# å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ (è³‡æ–™åº«å’Œ Redis)
docker-compose up -d
```

- `docker-compose down` æœƒåœæ­¢ä¸¦ç§»é™¤æ—¢æœ‰çš„å®¹å™¨
- `-d` åƒæ•¸æœƒè®“å®¹å™¨åœ¨èƒŒæ™¯æ¨¡å¼ä¸‹åŸ·è¡Œ
- ç¬¬ä¸€æ¬¡åŸ·è¡Œæ­¤æŒ‡ä»¤æ™‚ï¼ŒDocker æœƒéœ€è¦ä¸€äº›æ™‚é–“ä¾†ä¸‹è¼‰ SQL Server å’Œ Redis çš„æ˜ åƒæª”
- æˆåŠŸå•Ÿå‹•å¾Œï¼Œæ‚¨çš„è³‡æ–™åº«æœƒåœ¨ `localhost:1434` ä¸Šé‹è¡Œï¼ŒRedis æœƒåœ¨ `localhost:6379` ä¸Šé‹è¡Œ

### æ­¥é©ŸäºŒï¼šåˆå§‹åŒ–è³‡æ–™åº«

**é‡è¦**: SQL Server å®¹å™¨å•Ÿå‹•å¾Œï¼Œéœ€è¦æ‰‹å‹•åŸ·è¡Œ SQL è…³æœ¬ä¾†å»ºç«‹è³‡æ–™åº«çµæ§‹ã€‚

ç­‰å¾…ç´„ 30 ç§’è®“ SQL Server å®Œå…¨å•Ÿå‹•ï¼Œç„¶å¾ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
sqlcmd -S localhost,1434 -U sa -P "yourStrong(!)Password123" -i "db-scripts/init.sql"
```

- é€™å€‹æŒ‡ä»¤æœƒåŸ·è¡Œ `db-scripts/init.sql` è…³æœ¬ï¼Œå»ºç«‹æ‰€éœ€çš„è³‡æ–™åº«å’Œè³‡æ–™è¡¨ã€‚
- æˆåŠŸåŸ·è¡Œå¾Œï¼Œæ‚¨æœƒçœ‹åˆ° "è³‡æ–™åº«èˆ‡è³‡æ–™è¡¨å»ºç«‹å®Œæˆã€‚" çš„è¨Šæ¯ã€‚

### æ­¥é©Ÿä¸‰ï¼šå•Ÿå‹•å¾Œç«¯ API

è³‡æ–™åº«æˆåŠŸåˆå§‹åŒ–å¾Œï¼Œæ¥è‘—å•Ÿå‹• .NET Web APIã€‚

åŒæ¨£åœ¨æ‚¨çš„çµ‚ç«¯æ©Ÿä¸­ï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
dotnet run --project WebApplication1/WebApplication1 --launch-profile https
```

- é€™å€‹æŒ‡ä»¤æœƒå»ºç½®ä¸¦å•Ÿå‹•æ‚¨çš„ Web API å°ˆæ¡ˆã€‚
- æˆåŠŸå•Ÿå‹•å¾Œï¼Œæ‚¨æœƒçœ‹åˆ°çµ‚ç«¯æ©Ÿé¡¯ç¤º API æ­£åœ¨ç›£è½ `https://localhost:7194` å’Œ `http://localhost:5102`ã€‚

## 4. å¦‚ä½•ä½¿ç”¨ (Usage)

å°ˆæ¡ˆæˆåŠŸå•Ÿå‹•å¾Œï¼Œæ‚¨å¯ä»¥é€éä»¥ä¸‹æ–¹å¼èˆ‡ API äº’å‹•ï¼š

- **Swagger UI**: é€™æ˜¯æ¸¬è©¦ API æœ€æ–¹ä¾¿çš„æ–¹å¼ã€‚è«‹åœ¨æ‚¨çš„ç€è¦½å™¨ä¸­é–‹å•Ÿä»¥ä¸‹ç¶²å€ï¼š
  > **https://localhost:7194/swagger**

- **API åŸºç¤ URL**: `https://localhost:7194`

### æ¸¬è©¦æµç¨‹

1.  **è¨»å†Šä½¿ç”¨è€…**: ä½¿ç”¨ `/api/Auth/register` ç«¯é»ä¾†è¨»å†Šä¸€å€‹æ–°å¸³è™Ÿã€‚
2.  **ç™»å…¥**: ä½¿ç”¨ `/api/Auth/login` ç«¯é»ï¼Œä»¥å‰›å‰›è¨»å†Šçš„å¸³è™Ÿå¯†ç¢¼ç™»å…¥ï¼Œæ‚¨å°‡æœƒå¾—åˆ°ä¸€çµ„ Access Tokenã€‚
3.  **æˆæ¬Š**: é»æ“Š Swagger ä»‹é¢å³ä¸Šè§’çš„ã€Œ**Authorize**ã€æŒ‰éˆ•ï¼Œåœ¨è¼¸å…¥æ¡†ä¸­å¡«å…¥ `Bearer <æ‚¨çš„ Access Token>`ï¼Œç„¶å¾Œé»æ“Šã€ŒAuthorizeã€ã€‚
4.  **æ¸¬è©¦å—ä¿è­·çš„ API**: ç¾åœ¨æ‚¨å¯ä»¥æ¸¬è©¦ `WorkItems` æˆ– `user/states` ç­‰éœ€è¦æˆæ¬Šçš„ API äº†ã€‚Swagger æœƒè‡ªå‹•åœ¨æ‚¨çš„æ¯å€‹è«‹æ±‚ä¸­åŠ å…¥ `Authorization` æ¨™é ­ã€‚
5.  **æ¸¬è©¦å¿«å–åŠŸèƒ½**: ä½¿ç”¨ `/api/CacheTest` ç«¯é»ä¾†æ¸¬è©¦å¿«å–åŠŸèƒ½ï¼ˆ**åƒ…é™é–‹ç™¼ç’°å¢ƒ**ï¼‰ï¼š
    - `GET /api/CacheTest/info`: æŸ¥çœ‹ç›®å‰ä½¿ç”¨çš„å¿«å–æä¾›è€…
    - `POST /api/CacheTest/set`: è¨­å®šå¿«å–å€¼
    - `GET /api/CacheTest/get/{key}`: å–å¾—å¿«å–å€¼
    - `DELETE /api/CacheTest/remove/{key}`: ç§»é™¤å¿«å–å€¼
    - `GET /api/CacheTest/exists/{key}`: æª¢æŸ¥å¿«å–éµæ˜¯å¦å­˜åœ¨

6.  **æ¸¬è©¦è³‡æ–™ç®¡ç†**: ä½¿ç”¨ `/api/TestData` ç«¯é»ä¾†ç®¡ç†æ¸¬è©¦è³‡æ–™ï¼ˆ**åƒ…é™é–‹ç™¼ç’°å¢ƒ**ï¼‰ï¼š
    - `POST /api/TestData/create-test-users`: å»ºç«‹æ¸¬è©¦ä½¿ç”¨è€… (admin/123456, user/123456)
    - `POST /api/TestData/login-test-admin`: Admin ç™»å…¥æ¸¬è©¦
    - `POST /api/TestData/login-test-user`: User ç™»å…¥æ¸¬è©¦
    - `GET /api/TestData/test-users-status`: æª¢æŸ¥æ¸¬è©¦ä½¿ç”¨è€…ç‹€æ…‹
    - `DELETE /api/TestData/delete-test-users`: åˆªé™¤æ¸¬è©¦ä½¿ç”¨è€…
    
    **æ³¨æ„**: TestDataController å’Œ CacheTestController åƒ…åœ¨é–‹ç™¼ç’°å¢ƒä¸­å¯ç”¨ï¼Œç”Ÿç”¢ç’°å¢ƒæœƒå›å‚³404ã€‚

## 5. å¦‚ä½•åœæ­¢ (Stopping the Project)

- **åœæ­¢ API**: åœ¨åŸ·è¡Œ `dotnet run` çš„çµ‚ç«¯æ©Ÿè¦–çª—ä¸­ï¼ŒæŒ‰ä¸‹ `Ctrl + C` å³å¯ã€‚
- **åœæ­¢æœå‹™**: è‹¥è¦åœæ­¢ä¸¦ç§»é™¤ Docker å®¹å™¨ï¼Œè«‹åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œï¼š
  ```bash
  docker-compose down
  ```

## 6. å¿«å–æœå‹™åˆ‡æ› (Cache Service Switching)

### åˆ‡æ›åˆ° Redis å¿«å–
1. ä¿®æ”¹ `WebApplication1/WebApplication1/appsettings.json` ä¸­çš„ `CacheSettings.ProviderType` ç‚º `"Redis"`
2. ç¢ºä¿ Redis æœå‹™æ­£åœ¨é‹è¡Œ
3. é‡å•Ÿæ‡‰ç”¨ç¨‹å¼

### åˆ‡æ›åˆ°è¨˜æ†¶é«”å¿«å–
1. ä¿®æ”¹ `WebApplication1/WebApplication1/appsettings.json` ä¸­çš„ `CacheSettings.ProviderType` ç‚º `"Memory"`
2. é‡å•Ÿæ‡‰ç”¨ç¨‹å¼

### æ¸¬è©¦å¿«å–åˆ‡æ›
ä½¿ç”¨ `/api/CacheTest/info` ç«¯é»ä¾†ç¢ºèªç›®å‰ä½¿ç”¨çš„å¿«å–æä¾›è€…ã€‚
